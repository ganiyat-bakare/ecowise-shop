document.addEventListener("DOMContentLoaded",()=>{const a=document.getElementById("login-form"),i=document.getElementById("signup-form");if(a){const e=document.getElementById("login-message");a.addEventListener("submit",o=>{o.preventDefault();const r=document.getElementById("email").value.trim(),s=document.getElementById("password").value.trim(),n=(JSON.parse(localStorage.getItem("users"))||[]).find(t=>t.email===r&&t.password===s);n?(localStorage.setItem("isLoggedIn","true"),localStorage.setItem("currentUser",JSON.stringify(n)),localStorage.setItem("authToken",JSON.stringify({email:n.email})),e.textContent="Login successful! Redirecting...",e.style.color="green",setTimeout(()=>{window.location.href="../orders/index.html"},1500)):(e.textContent="Invalid email or password.",e.style.color="red")}),document.getElementById("show-password-login").addEventListener("change",function(){document.getElementById("password").type=this.checked?"text":"password"})}if(i){const e=document.getElementById("signup-message");i.addEventListener("submit",o=>{o.preventDefault();const r=document.getElementById("username").value.trim(),s=document.getElementById("email-signup").value.trim(),d=document.getElementById("password-signup").value.trim(),n=document.getElementById("confirm-password").value.trim();if(d!==n){e.textContent="Passwords do not match!",e.style.color="red";return}const t=JSON.parse(localStorage.getItem("users"))||[];if(t.some(l=>l.email===s)){e.textContent="User already exists!",e.style.color="red";return}const m={username:r,email:s,password:d};t.push(m),localStorage.setItem("users",JSON.stringify(t)),e.textContent="Account created! Redirecting to login...",e.style.color="green",setTimeout(()=>{window.location.href="/auth/login.html"},1500)}),document.getElementById("show-password-signup").addEventListener("change",function(){document.getElementById("password-signup").type=this.checked?"text":"password"}),document.getElementById("show-confirm-password").addEventListener("change",function(){document.getElementById("confirm-password").type=this.checked?"text":"password"})}});const u=document.querySelector(".navigation"),c=document.querySelector("#menu");c.addEventListener("click",()=>{u.classList.toggle("open"),c.classList.toggle("open")});
